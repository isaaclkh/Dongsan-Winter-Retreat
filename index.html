```html
<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>2026 ë™ê³„ìˆ˜ë ¨íšŒ | ë™ì‚°ë¹„ì „êµíšŒ</title>
  <style>
    :root{
      --bg: #0b1220;           /* slate-900-ish */
      --panel: rgba(30,41,59,.55);
      --panel2: rgba(30,41,59,.35);
      --border: rgba(148,163,184,.22);
      --text: #e5e7eb;
      --muted:#94a3b8;
      --amber:#f59e0b;
      --amber2:#fbbf24;
      --blue:#3b82f6;
      --blue2:#60a5fa;
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --r-lg: 24px;
      --r-xl: 32px;
      --max: 440px;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", "Apple SD Gothic Neo", "Malgun Gothic", sans-serif;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: var(--font);
      color: var(--text);
      background: #07101f;
      overflow-x:hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      selection-background: var(--amber);
    }
    ::selection{ background: var(--amber); color:#0b1220; }

    .app{
      min-height:100vh;
      background: #0b1220;
      position:relative;
    }

    /* Toast */
    .toast{
      position:fixed;
      top: 22px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 300;
      background: var(--amber);
      color: #0b1220;
      padding: 12px 18px;
      border-radius: 999px;
      font-weight: 800;
      display:flex;
      align-items:center;
      gap:10px;
      box-shadow: var(--shadow);
      animation: bounce 1s infinite;
    }
    .toast[hidden]{ display:none; }
    @keyframes bounce{
      0%,100%{ transform: translateX(-50%) translateY(0); }
      50%{ transform: translateX(-50%) translateY(-6px); }
    }

    /* Hero */
    .hero{
      position:relative;
      height: 60vh;
      min-height: 420px;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      background: linear-gradient(to bottom, #0b3a86, #0b1220 55%, #0b1220);
    }
    .glow{
      position:absolute; inset:0;
      opacity:.22;
      pointer-events:none;
    }
    .glow .g1{
      position:absolute; top: 40px; left: 40px;
      width: 140px; height: 140px; border-radius:999px;
      background: var(--amber2);
      filter: blur(80px);
      animation: pulse 2.6s ease-in-out infinite;
    }
    .glow .g2{
      position:absolute; bottom: 80px; right: 30px;
      width: 180px; height: 180px; border-radius:999px;
      background: var(--blue);
      filter: blur(100px);
      animation: pulse 2.6s ease-in-out infinite;
      animation-delay: .7s;
    }
    @keyframes pulse{
      0%,100%{ transform: scale(1); opacity:.75; }
      50%{ transform: scale(1.12); opacity:1; }
    }

    .stars{
      position:absolute; inset:0;
      pointer-events:none;
    }
    .star{
      position:absolute;
      background: #fff;
      border-radius: 999px;
      animation: twinkle 3s infinite ease-in-out;
      opacity:.55;
    }
    @keyframes twinkle{
      0%,100%{ opacity: .3; transform: scale(1); }
      50%{ opacity: 1; transform: scale(1.2); }
    }

    .share-btn{
      position:absolute;
      top: 20px; right: 20px;
      width: 46px; height: 46px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.1);
      backdrop-filter: blur(10px);
      display:grid;
      place-items:center;
      cursor:pointer;
      transition: .2s ease;
    }
    .share-btn:hover{ background: rgba(255,255,255,.18); }
    .share-btn:active{ transform: scale(.92); }

    .hero-inner{
      z-index: 10;
      text-align:center;
      padding: 0 18px;
      max-width: 720px;
      opacity:0;
      transform: translateY(14px);
      transition: 1s ease;
    }
    .hero-inner.visible{
      opacity:1;
      transform: translateY(0);
    }

    .pillrow{
      display:flex;
      justify-content:center;
      gap:10px;
      margin-bottom: 14px;
    }
    .pill{
      display:flex;
      align-items:center;
      gap:8px;
      border: 1px solid rgba(148,163,184,.25);
      background: rgba(15,23,42,.65);
      backdrop-filter: blur(8px);
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 11px;
      color: var(--muted);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }

    .kicker{
      color: var(--amber2);
      font-weight: 800;
      letter-spacing: .22em;
      text-transform: uppercase;
      font-size: 12px;
      margin: 10px 0 10px;
    }
    .subkicker{
      color: #bfdbfe;
      font-weight: 300;
      letter-spacing: .16em;
      text-transform: uppercase;
      margin: 0 0 10px;
      font-size: 14px;
    }
    .title{
      font-weight: 900;
      line-height: 1.12;
      margin: 0 0 14px;
      font-size: clamp(32px, 5vw, 54px);
      word-break: keep-all;
    }
    .title .grad{
      background: linear-gradient(90deg, #fde68a, var(--amber));
      -webkit-background-clip:text;
      background-clip:text;
      color: transparent;
    }
    .divider{
      width: 48px;
      height: 4px;
      border-radius: 999px;
      background: var(--amber);
      margin: 0 auto 16px;
      box-shadow: 0 0 15px rgba(245,158,11,.4);
    }
    .quote{
      color: #cbd5e1;
      opacity:.95;
      font-size: 13px;
      line-height: 1.6;
      font-style: italic;
      max-width: 340px;
      margin: 0 auto;
    }

    /* Main container */
    .main{
      max-width: var(--max);
      margin: 0 auto;
      padding: 22px 18px 80px;
      display:flex;
      flex-direction:column;
      gap: 18px;
    }

    /* AI Entry Card (static) */
    .ai-entry{
      position:relative;
      cursor:pointer;
    }
    .ai-entry::before{
      content:"";
      position:absolute;
      inset:-4px;
      border-radius: 28px;
      background: linear-gradient(90deg, var(--amber), var(--blue));
      filter: blur(16px);
      opacity:.22;
      transition: 1s ease;
    }
    .ai-entry:hover::before{ opacity:.45; }
    .ai-card{
      position:relative;
      border-radius: 28px;
      background: rgba(30,41,59,.9);
      border: 1px solid rgba(255,255,255,.10);
      padding: 18px;
      box-shadow: 0 14px 40px rgba(0,0,0,.35);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 14px;
    }
    .ai-card h3{
      margin:0 0 6px;
      font-size: 18px;
      color: var(--amber2);
      display:flex;
      align-items:center;
      gap:8px;
      font-weight: 900;
    }
    .ai-card p{
      margin:0;
      color: var(--muted);
      font-size: 12px;
    }
    .ai-badge{
      width: 44px; height: 44px;
      border-radius: 999px;
      background: rgba(245,158,11,.12);
      display:grid;
      place-items:center;
      border: 1px solid rgba(245,158,11,.18);
    }

    /* Info cards */
    .grid{
      display:grid;
      gap: 12px;
    }
    .info{
      display:flex;
      gap: 14px;
      align-items:center;
      border-radius: 18px;
      padding: 16px;
      background: rgba(30,41,59,.45);
      border: 1px solid rgba(148,163,184,.22);
      backdrop-filter: blur(8px);
      box-shadow: 0 8px 22px rgba(0,0,0,.22);
    }
    .iconbox{
      width: 44px; height: 44px;
      border-radius: 14px;
      display:grid;
      place-items:center;
      border: 1px solid rgba(255,255,255,.07);
    }
    .iconbox.blue{ background: rgba(59,130,246,.18); }
    .iconbox.amber{ background: rgba(245,158,11,.18); }
    .meta .label{
      color: var(--muted);
      font-size: 12px;
      font-weight: 700;
      margin-bottom: 4px;
    }
    .meta .value{
      font-size: 18px;
      font-weight: 900;
    }

    /* Program */
    .section-title{
      display:flex;
      align-items:center;
      gap:10px;
      padding: 0 8px;
      margin: 10px 0 4px;
      font-size: 20px;
      font-weight: 900;
      text-decoration: underline;
      text-underline-offset: 10px;
      text-decoration-color: rgba(245,158,11,.28);
    }
    .program{
      display:flex;
      flex-direction:column;
      gap: 10px;
    }
    .day{
      border-radius: 18px;
      padding: 16px;
      border: 1px solid rgba(148,163,184,.16);
      background: rgba(30,41,59,.28);
    }
    .day-head{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap: 10px;
      margin-bottom: 12px;
    }
    .day-head .d{
      color: var(--amber2);
      font-weight: 900;
      font-size: 13px;
      letter-spacing: .08em;
      text-transform: uppercase;
    }
    .day-head .tag{
      font-size: 10px;
      font-weight: 900;
      text-transform: uppercase;
      color: #bfdbfe;
      background: rgba(37,99,235,.28);
      border: 1px solid rgba(37,99,235,.25);
      padding: 3px 8px;
      border-radius: 999px;
      white-space:nowrap;
    }
    .items{
      list-style:none;
      padding:0;
      margin:0;
      display:flex;
      flex-direction:column;
      gap: 9px;
    }
    .items li{
      display:flex;
      gap: 10px;
      align-items:flex-start;
      color: #cbd5e1;
      font-size: 14px;
    }
    .dot{
      width: 7px; height: 7px;
      border-radius: 999px;
      background: var(--blue);
      margin-top: 7px;
      flex: 0 0 auto;
    }

    /* CTA */
    .cta-wrap{
      padding-top: 12px;
      padding-bottom: 28px;
    }
    .cta{
      width:100%;
      border:0;
      border-radius: 18px;
      padding: 18px 18px;
      font-weight: 1000;
      font-size: 18px;
      color: #0b1220;
      cursor:pointer;
      background: linear-gradient(90deg, var(--amber), #f59e0b);
      box-shadow: 0 18px 40px rgba(245,158,11,.18);
      display:flex;
      align-items:center;
      justify-content:center;
      gap: 10px;
      transition: .2s ease;
    }
    .cta:hover{
      background: linear-gradient(90deg, #fbbf24, var(--amber));
    }
    .cta:active{ transform: scale(.97); }
    .stats{
      margin-top: 10px;
      opacity: .65;
      text-align:center;
      font-size: 11px;
      color: var(--muted);
      display:flex;
      gap: 14px;
      justify-content:center;
    }
    .hint{
      margin-top: 10px;
      text-align:center;
      font-size: 12px;
      color: var(--muted);
      opacity:.8;
    }
    .hint a{
      color: #bfdbfe;
      text-decoration: none;
      border-bottom: 1px dashed rgba(191,219,254,.45);
    }
    .hint a:hover{ border-bottom-color: rgba(191,219,254,.85); }

    /* Modal */
    .modal-overlay{
      position:fixed;
      inset:0;
      z-index: 200;
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      background: rgba(2,6,23,.72);
      backdrop-filter: blur(12px);
      overflow:auto;
    }
    .modal-overlay.open{ display:flex; }
    .modal{
      width: 100%;
      max-width: 380px;
      border-radius: 32px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(30,41,59,.95);
      box-shadow: var(--shadow);
      position:relative;
      display:flex;
      flex-direction:column;
      max-height: 85vh;
      overflow:hidden;
    }
    .modal .close{
      position:absolute;
      top: 18px;
      right: 18px;
      width: 38px;
      height: 38px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,.18);
      background: rgba(15,23,42,.35);
      color: var(--muted);
      display:grid;
      place-items:center;
      cursor:pointer;
      transition:.2s ease;
    }
    .modal .close:hover{ color:#fff; background: rgba(15,23,42,.55); }

    .modal-body{
      padding: 22px 22px 10px;
      display:flex;
      flex-direction:column;
      gap: 14px;
    }
    .modal-head{
      display:flex;
      gap: 12px;
      align-items:center;
      margin-top: 8px;
    }
    .logo{
      width: 42px;
      height: 42px;
      border-radius: 16px;
      background: var(--amber);
      display:grid;
      place-items:center;
      color: #0b1220;
      font-weight: 1000;
      box-shadow: 0 10px 22px rgba(0,0,0,.25);
    }
    .modal-title{
      margin:0;
      font-size: 20px;
      font-weight: 1000;
    }
    .modal-sub{
      margin:4px 0 0;
      font-size: 12px;
      color: var(--muted);
    }

    .seg{
      display:flex;
      gap: 6px;
      padding: 6px;
      border-radius: 14px;
      background: rgba(2,6,23,.35);
      border: 1px solid rgba(148,163,184,.14);
    }
    .seg button{
      flex:1;
      border:0;
      border-radius: 10px;
      padding: 10px 10px;
      cursor:pointer;
      background: transparent;
      color: var(--muted);
      font-weight: 900;
      font-size: 12px;
      transition: .15s ease;
    }
    .seg button.active{
      background: var(--amber);
      color: #0b1220;
      box-shadow: 0 6px 18px rgba(0,0,0,.20);
    }

    .scroll{
      margin-top: 4px;
      padding-right: 6px;
      overflow:auto;
      min-height: 160px;
      max-height: 40vh;
    }
    .scroll::-webkit-scrollbar{ width: 4px; }
    .scroll::-webkit-scrollbar-thumb{ background: #334155; border-radius: 10px; }

    .empty{
      text-align:center;
      padding: 30px 10px;
      opacity:.35;
      color:#e2e8f0;
      font-size: 12px;
    }
    .bubble{
      background: rgba(30,64,175,.20);
      border: 1px solid rgba(59,130,246,.22);
      padding: 14px;
      border-radius: 18px;
      color: #dbeafe;
      font-size: 14px;
      line-height: 1.6;
      white-space: pre-wrap;
      animation: fadeIn .5s ease-out forwards;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.03);
    }

    @keyframes fadeIn{
      from{ opacity:0; transform: translateY(10px); }
      to{ opacity:1; transform: translateY(0); }
    }

    .modal-foot{
      padding: 0 22px 20px;
    }
    .inputwrap{
      position:relative;
      margin-top: 10px;
    }
    .input{
      width:100%;
      border-radius: 18px;
      border: 1px solid rgba(148,163,184,.22);
      background: rgba(2,6,23,.55);
      color: #e5e7eb;
      padding: 14px 54px 14px 14px;
      outline:none;
      font-size: 14px;
      box-shadow: inset 0 10px 20px rgba(0,0,0,.28);
    }
    .input::placeholder{ color: rgba(148,163,184,.55); }
    .send{
      position:absolute;
      top: 7px;
      right: 7px;
      bottom: 7px;
      width: 44px;
      border-radius: 14px;
      border:0;
      cursor:pointer;
      background: var(--amber);
      color:#0b1220;
      display:grid;
      place-items:center;
      transition:.15s ease;
    }
    .send:disabled{
      opacity:.5;
      cursor:not-allowed;
    }
    .send:active{ transform: scale(.96); }

    .powered{
      text-align:center;
      font-size: 10px;
      color: rgba(148,163,184,.7);
      margin-top: 10px;
      letter-spacing: -.02em;
    }

    /* Small screens */
    @media (max-width: 360px){
      .meta .value{ font-size: 16px; }
      .ai-card h3{ font-size: 16px; }
      .cta{ font-size: 16px; }
    }
  </style>
</head>
<body>
  <div class="app" id="app">
    <!-- Toast -->
    <div class="toast" id="toast" hidden aria-live="polite" aria-atomic="true">
      <span aria-hidden="true">âœ…</span>
      <span>ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!</span>
    </div>

    <!-- Hero -->
    <header class="hero">
      <div class="glow" aria-hidden="true">
        <div class="g1"></div>
        <div class="g2"></div>
      </div>

      <div class="stars" id="stars" aria-hidden="true"></div>

      <button class="share-btn" id="shareBtn" aria-label="í˜„ì¬ í˜ì´ì§€ ë§í¬ ë³µì‚¬">
        <span aria-hidden="true">ğŸ”—</span>
      </button>

      <div class="hero-inner" id="heroInner">
        <div class="pillrow">
          <div class="pill" title="í˜ì´ì§€ í™•ì¸ ìˆ˜ (ë¡œì»¬ ì§‘ê³„)">
            <span aria-hidden="true">ğŸ‘ï¸</span>
            <span><span id="viewsText">0</span>ëª…ì´ í™•ì¸í•¨</span>
          </div>
        </div>

        <p class="kicker">Dongsan Vision Church Youth</p>
        <p class="subkicker">2026 Winter Retreat</p>

        <h1 class="title">
          ìš”ì…‰ì˜ ì‚¶ì„<br />
          <span class="grad">ë²¤ì¹˜ë§ˆí‚¹í•˜ë¼</span>
        </h1>

        <div class="divider"></div>

        <p class="quote">
          "í•˜ë‚˜ë‹˜ì´ ì•ì„œ ë‚˜ë¥¼ ë³´ë‚´ì…¨ë‚˜ì´ë‹¤"<br />ì°½ì„¸ê¸° 45:5
        </p>
      </div>
    </header>

    <!-- Main -->
    <main class="main">
      <!-- AI Entry Card (kept UI, but no API calls) -->
      <section class="ai-entry" id="aiEntry" role="button" tabindex="0" aria-label="ìš”ì…‰ì˜ ë¹„ì „ ë©˜í† ë§ ì—´ê¸°">
        <div class="ai-card">
          <div style="flex:1;">
            <h3><span aria-hidden="true">âœ¨</span> ìš”ì…‰ì˜ ë¹„ì „ ë©˜í† ë§</h3>
            <p>ìˆ˜ë ¨íšŒ ì „, ìš”ì…‰ì—ê²Œ ì¡°ì–¸ì„ êµ¬í•´ë³´ì„¸ìš” (ë°ëª¨)</p>
          </div>
          <div class="ai-badge" aria-hidden="true">ğŸ’¬</div>
        </div>
      </section>

      <!-- Date / Location -->
      <section class="grid" aria-label="ìˆ˜ë ¨íšŒ ê¸°ë³¸ ì •ë³´">
        <div class="info">
          <div class="iconbox blue" aria-hidden="true">ğŸ“…</div>
          <div class="meta">
            <div class="label">ì¼ì‹œ</div>
            <div class="value" id="dateText">2026. 01. 23 (ê¸ˆ) - 25 (ì£¼)</div>
          </div>
        </div>

        <div class="info">
          <div class="iconbox amber" aria-hidden="true">ğŸ“</div>
          <div class="meta">
            <div class="label">ì¥ì†Œ</div>
            <div class="value" id="locText">ë™ì‚°ë¹„ì „êµíšŒ</div>
          </div>
        </div>
      </section>

      <!-- Program -->
      <section aria-label="í”„ë¡œê·¸ë¨">
        <div class="section-title"><span aria-hidden="true">â°</span> PROGRAM</div>
        <div class="program" id="program"></div>
      </section>

      <!-- CTA -->
      <section class="cta-wrap" aria-label="ë“±ë¡">
        <button class="cta" id="registerBtn" type="button">
          <span>ì§€ê¸ˆ ë°”ë¡œ ë“±ë¡í•˜ê¸°</span>
          <span aria-hidden="true">âœ…</span>
        </button>
        <div class="stats">
          <span>ì¡°íšŒ <span id="viewsNum">0</span></span>
          <span>ë“±ë¡ í´ë¦­ <span id="clicksNum">0</span></span>
        </div>
        <div class="hint">
          ë“±ë¡ ë§í¬:
          <a id="regLink" href="https://forms.gle/JJnuGSsyHJ76f8dCA" target="_blank" rel="noopener noreferrer">
            Google Form ì—´ê¸°
          </a>
        </div>
      </section>
    </main>

    <!-- Modal (AI UI only; no external API) -->
    <div class="modal-overlay" id="modalOverlay" role="dialog" aria-modal="true" aria-label="AI ë©˜í†  ìš”ì…‰">
      <div class="modal">
        <button class="close" id="closeModal" aria-label="ë‹«ê¸°">âœ•</button>

        <div class="modal-body">
          <div class="modal-head">
            <div class="logo" aria-hidden="true">âœ¨</div>
            <div>
              <h2 class="modal-title">âœ¨ AI ë©˜í†  ìš”ì…‰</h2>
              <p class="modal-sub">ê¿ˆê¾¸ëŠ” ìì˜ ì§€í˜œë¥¼ êµ¬í•˜ì„¸ìš” (ì˜¤í”„ë¼ì¸ ë°ëª¨)</p>
            </div>
          </div>

          <div class="seg" role="tablist" aria-label="ëª¨ë“œ ì„ íƒ">
            <button id="tabMentor" class="active" type="button" role="tab" aria-selected="true">ë¹„ì „ ë©˜í† ë§</button>
            <button id="tabVision" type="button" role="tab" aria-selected="false">ê¿ˆì˜ ì‹œê°í™”</button>
          </div>

          <div class="scroll" id="modalScroll">
            <div class="empty" id="emptyState">
              <div style="font-size:42px; margin-bottom:8px;" aria-hidden="true">ğŸ’¬</div>
              <div id="emptyText">ê³ ë¯¼ì´ë‚˜ ë¹„ì „ì„ ë§ì”€í•´ ë³´ì„¸ìš”</div>
            </div>

            <div id="responseWrap" style="display:none;"></div>
          </div>
        </div>

        <div class="modal-foot">
          <div class="inputwrap">
            <input class="input" id="userInput" type="text" placeholder="ìš”ì…‰ë‹˜, ì œ ê³ ë¯¼ì€..." />
            <button class="send" id="sendBtn" type="button" aria-label="ë³´ë‚´ê¸°">â¤</button>
          </div>
          <div class="powered">Powered by (disabled) Gemini AI Engine</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ====== Data (from your React component) ======
    const retreatInfo = {
      title: "2026 ë™ê³„ìˆ˜ë ¨íšŒ",
      theme: "ìš”ì…‰ì˜ ì‚¶ì„ ë²¤ì¹˜ë§ˆí‚¹í•˜ë¼",
      date: "2026. 01. 23 (ê¸ˆ) - 25 (ì£¼)",
      location: "ë™ì‚°ë¹„ì „êµíšŒ",
      verse: "ìš”ì…‰ì´ ê¿ˆì„ ê¾¸ê³  ìê¸° í˜•ë“¤ì—ê²Œ ë§í•˜ë§¤... (ì°½ì„¸ê¸° 37:5)",
      registrationUrl: "https://forms.gle/JJnuGSsyHJ76f8dCA",
      schedule: [
        { day: "1ì¼ì°¨ (ê¸ˆ)", title: "ê¿ˆì˜ ì‹œì‘", items: ["19:00 ê²½ë°°ì™€ ì°¬ì–‘ ì˜ˆë°°", "21:00 ê¸°ë„íšŒ"] },
        { day: "2ì¼ì°¨ (í† )", title: "ì—°ë‹¨ì˜ ì‹œê°„", items: ["10:00 ê°•ì˜ ì„±ê²½ íŒŒë…¸ë¼ë§ˆ", "14:00 íŠ¹ê°• í”„ë¡œê·¸ë¨", "19:00 ì €ë… ì§‘íšŒ"] },
        { day: "3ì¼ì°¨ (ì£¼)", title: "ì•½ì†ì˜ ì„±ì·¨", items: ["11:00 ì£¼ì¼ ì—°í•©ì˜ˆë°°", "15:00 ìˆ˜ë ¨íšŒ ë§ˆë¬´ë¦¬"] }
      ]
    };

    // ====== Local stats (no Firebase): localStorage counters ======
    const LS_VIEWS = "winter_retreat_2026_views";
    const LS_CLICKS = "winter_retreat_2026_clicks";

    function getNum(key){
      const n = Number(localStorage.getItem(key));
      return Number.isFinite(n) ? n : 0;
    }
    function setNum(key, val){
      localStorage.setItem(key, String(val));
    }

    function updateStatsUI(){
      const views = getNum(LS_VIEWS);
      const clicks = getNum(LS_CLICKS);
      document.getElementById("viewsText").textContent = views.toLocaleString();
      document.getElementById("viewsNum").textContent = views.toLocaleString();
      document.getElementById("clicksNum").textContent = clicks.toLocaleString();
    }

    // ====== Star field ======
    function makeStars(count = 15){
      const box = document.getElementById("stars");
      const w = box.clientWidth || window.innerWidth;
      const h = box.clientHeight || 400;

      box.innerHTML = "";
      for(let i=0;i<count;i++){
        const s = document.createElement("div");
        s.className = "star";
        const size = (Math.random() * 3 + 1);
        s.style.width = size + "px";
        s.style.height = size + "px";
        s.style.left = (Math.random() * 100) + "%";
        s.style.top = (Math.random() * 100) + "%";
        s.style.animationDelay = (Math.random() * 5) + "s";
        box.appendChild(s);
      }
    }

    // ====== Program render ======
    function renderProgram(){
      const wrap = document.getElementById("program");
      wrap.innerHTML = "";

      retreatInfo.schedule.forEach(day => {
        const card = document.createElement("div");
        card.className = "day";

        const head = document.createElement("div");
        head.className = "day-head";

        const d = document.createElement("div");
        d.className = "d";
        d.textContent = day.day;

        const tag = document.createElement("div");
        tag.className = "tag";
        tag.textContent = day.title;

        head.appendChild(d);
        head.appendChild(tag);

        const ul = document.createElement("ul");
        ul.className = "items";

        day.items.forEach(item => {
          const li = document.createElement("li");
          const dot = document.createElement("span");
          dot.className = "dot";
          const text = document.createElement("span");
          text.textContent = item;

          li.appendChild(dot);
          li.appendChild(text);
          ul.appendChild(li);
        });

        card.appendChild(head);
        card.appendChild(ul);
        wrap.appendChild(card);
      });
    }

    // ====== Share: copy current URL ======
    async function copyLink(){
      const url = window.location.href;
      try{
        if(navigator.clipboard && navigator.clipboard.writeText){
          await navigator.clipboard.writeText(url);
        }else{
          const ta = document.createElement("textarea");
          ta.value = url;
          document.body.appendChild(ta);
          ta.select();
          document.execCommand("copy");
          document.body.removeChild(ta);
        }
        showToast();
      }catch(e){
        console.error(e);
        alert("ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì£¼ì†Œì°½ì˜ URLì„ ì§ì ‘ ë³µì‚¬í•´ì£¼ì„¸ìš”.");
      }
    }

    let toastTimer = null;
    function showToast(){
      const t = document.getElementById("toast");
      t.hidden = false;
      clearTimeout(toastTimer);
      toastTimer = setTimeout(()=>{ t.hidden = true; }, 2000);
    }

    // ====== Registration click ======
    function register(){
      const clicks = getNum(LS_CLICKS) + 1;
      setNum(LS_CLICKS, clicks);
      updateStatsUI();
      window.open(retreatInfo.registrationUrl, "_blank", "noopener,noreferrer");
    }

    // ====== Modal (AI UI only) ======
    const modalOverlay = document.getElementById("modalOverlay");
    const aiEntry = document.getElementById("aiEntry");
    const closeModal = document.getElementById("closeModal");

    const tabMentor = document.getElementById("tabMentor");
    const tabVision = document.getElementById("tabVision");

    const emptyState = document.getElementById("emptyState");
    const emptyText = document.getElementById("emptyText");
    const responseWrap = document.getElementById("responseWrap");

    const userInput = document.getElementById("userInput");
    const sendBtn = document.getElementById("sendBtn");

    let aiMode = "mentor";

    function openModal(){
      modalOverlay.classList.add("open");
      // lock background scroll
      document.body.style.overflow = "hidden";
      userInput.focus();
    }
    function closeModalFn(){
      modalOverlay.classList.remove("open");
      document.body.style.overflow = "";
    }

    function setMode(mode){
      aiMode = mode;
      // reset UI
      responseWrap.style.display = "none";
      responseWrap.innerHTML = "";
      emptyState.style.display = "block";

      if(aiMode === "mentor"){
        tabMentor.classList.add("active");
        tabVision.classList.remove("active");
        tabMentor.setAttribute("aria-selected","true");
        tabVision.setAttribute("aria-selected","false");
        userInput.placeholder = "ìš”ì…‰ë‹˜, ì œ ê³ ë¯¼ì€...";
        emptyText.textContent = "ê³ ë¯¼ì´ë‚˜ ë¹„ì „ì„ ë§ì”€í•´ ë³´ì„¸ìš”";
      }else{
        tabVision.classList.add("active");
        tabMentor.classList.remove("active");
        tabVision.setAttribute("aria-selected","true");
        tabMentor.setAttribute("aria-selected","false");
        userInput.placeholder = "í‘¸ë¥¸ ì´ˆì¥ ìœ„ì— ì„¸ì›Œì§„ êµíšŒ...";
        emptyText.textContent = "ê¿ˆê¾¸ëŠ” ë¯¸ë˜ë¥¼ ì§§ê²Œ ì„¤ëª…í•´ ë³´ì„¸ìš”";
      }
    }

    function fakeAIReply(text){
      // No API calls: just a simple local â€œdemoâ€ response
      const trimmed = (text || "").trim();
      if(!trimmed) return;

      emptyState.style.display = "none";
      responseWrap.style.display = "block";

      let reply = "";
      if(aiMode === "mentor"){
        reply =
`(ë°ëª¨ ì‘ë‹µ)
â€œêµ¬ë©ì´ì˜ ì‹œê°„ë„ í—›ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
ì§€ê¸ˆì˜ ê³ ë¯¼ì„ í•œ ë¬¸ì¥ìœ¼ë¡œ ì •ë¦¬í•´ ë³´ì„¸ìš”.
ì‘ê²Œ ì‹œì‘í•´ë„ ëê¹Œì§€ ì‹ ì‹¤í•˜ê²Œ ê±¸ìœ¼ë©´,
í•˜ë‚˜ë‹˜ì€ ë°˜ë“œì‹œ ë‹¤ìŒ ë¬¸ì„ ì—¬ì‹­ë‹ˆë‹¤.â€

ë‹¹ì‹ ì˜ ì…ë ¥: ${trimmed}`;
      }else{
        reply =
`(ë°ëª¨ ì•ˆë‚´)
í˜„ì¬ ì´ í˜ì´ì§€ëŠ” ì´ë¯¸ì§€ ìƒì„± APIë¥¼ ì œê±°í•œ ë²„ì „ì…ë‹ˆë‹¤.
ëŒ€ì‹ , ë‹¹ì‹ ì˜ ë¹„ì „ì„ ì•„ë˜ì²˜ëŸ¼ â€˜ë¬¸ì¥ìœ¼ë¡œ ì‹œê°í™”â€™í•´ ë³´ì„¸ìš”:

- í•µì‹¬ ì¥ë©´: ${trimmed}
- ë¹›/ë¶„ìœ„ê¸°: ë”°ëœ»í•œ ê¸ˆë¹›, ì†Œë§
- í–‰ë™: í•œ ê±¸ìŒì”© ìˆœì¢…

(ì›í•˜ë©´ ì‹¤ì œ ì´ë¯¸ì§€ ìƒì„± ê¸°ëŠ¥ì„ ë‹¤ì‹œ ë¶™ì¼ ìˆ˜ ìˆì–´ìš”.)`;
      }

      const bubble = document.createElement("div");
      bubble.className = "bubble";
      bubble.textContent = reply;
      responseWrap.appendChild(bubble);

      // scroll to bottom
      const sc = document.getElementById("modalScroll");
      sc.scrollTop = sc.scrollHeight;
    }

    function send(){
      const text = userInput.value;
      if(!text.trim()) return;
      fakeAIReply(text);
      userInput.value = "";
      userInput.focus();
    }

    // ====== Init ======
    (function init(){
      // Populate text fields
      document.getElementById("dateText").textContent = retreatInfo.date;
      document.getElementById("locText").textContent = retreatInfo.location;
      document.getElementById("regLink").href = retreatInfo.registrationUrl;

      // Count a view (local only)
      setNum(LS_VIEWS, getNum(LS_VIEWS) + 1);
      updateStatsUI();

      renderProgram();
      makeStars(15);

      // Hero entrance
      requestAnimationFrame(() => {
        document.getElementById("heroInner").classList.add("visible");
      });

      // Events
      document.getElementById("shareBtn").addEventListener("click", copyLink);
      document.getElementById("registerBtn").addEventListener("click", register);

      aiEntry.addEventListener("click", openModal);
      aiEntry.addEventListener("keydown", (e) => {
        if(e.key === "Enter" || e.key === " "){ e.preventDefault(); openModal(); }
      });

      closeModal.addEventListener("click", closeModalFn);
      modalOverlay.addEventListener("click", (e) => {
        if(e.target === modalOverlay) closeModalFn();
      });
      window.addEventListener("keydown", (e) => {
        if(e.key === "Escape" && modalOverlay.classList.contains("open")) closeModalFn();
      });

      tabMentor.addEventListener("click", () => setMode("mentor"));
      tabVision.addEventListener("click", () => setMode("vision"));

      sendBtn.addEventListener("click", send);
      userInput.addEventListener("keydown", (e) => {
        if(e.key === "Enter"){ send(); }
      });

      // Rebuild stars on resize (optional)
      window.addEventListener("resize", () => makeStars(15));
    })();
  </script>
</body>
</html>
```
